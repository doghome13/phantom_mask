(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1d6cd14"],{"2cea":function(t,e,a){"use strict";a.r(e);a("b0c0");var n=a("7a23"),c=function(t){return Object(n["L"])("data-v-7d6a69f4"),t=t(),Object(n["J"])(),t},i={class:"default"},l={style:{"margin-bottom":"10px"},class:"table"},r={class:"default flex pull-right"},s={style:{"margin-right":"20px"}},u=c((function(){return Object(n["n"])("label",{style:{"margin-right":"10px"}},"顧客",-1)})),o=c((function(){return Object(n["n"])("label",{style:{"margin-right":"10px"}},"藥局",-1)})),d={class:"table"},b={class:"table flex pull-right"},h={class:"default"},p=c((function(){return Object(n["n"])("label",null,"顧客：",-1)})),f=c((function(){return Object(n["n"])("label",null,"購買商品：",-1)})),m={class:"table flex pull-right"},j=Object(n["q"])("存檔");function O(t,e,a,c,O,g){var y=Object(n["R"])("el-option"),k=Object(n["R"])("el-select"),v=Object(n["R"])("el-table-column"),L=Object(n["R"])("el-button"),I=Object(n["R"])("el-table"),w=Object(n["S"])("loading");return Object(n["I"])(),Object(n["m"])("ul",i,[Object(n["n"])("li",l,[Object(n["n"])("ul",r,[Object(n["n"])("li",s,[u,Object(n["r"])(k,{modelValue:t.user.id,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.user.id=e}),placeholder:"請選擇"},{default:Object(n["gb"])((function(){return[Object(n["r"])(y,{value:0,label:"請選擇"}),(Object(n["I"])(!0),Object(n["m"])(n["b"],null,Object(n["P"])(t.usersList,(function(t){return Object(n["I"])(),Object(n["k"])(y,{key:t.id,label:t.name,value:t.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),Object(n["n"])("li",null,[o,Object(n["r"])(k,{modelValue:t.pickPharmacyId,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.pickPharmacyId=e}),placeholder:"請選擇",onChange:g.getMasks},{default:Object(n["gb"])((function(){return[Object(n["r"])(y,{value:0,label:"請選擇"}),(Object(n["I"])(!0),Object(n["m"])(n["b"],null,Object(n["P"])(t.pharmaciesList,(function(t){return Object(n["I"])(),Object(n["k"])(y,{key:t.id,label:t.name,value:t.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])])])]),Object(n["n"])("li",d,[Object(n["hb"])(Object(n["r"])(I,{data:t.tableData},{default:Object(n["gb"])((function(){return[Object(n["r"])(v,{prop:"name",label:"口罩名稱",width:"180",sortable:""}),Object(n["r"])(v,{prop:"color",label:"顏色","min-width":"50"}),Object(n["r"])(v,{prop:"price",label:"價格","min-width":"50",sortable:""}),Object(n["r"])(v,{label:"選擇","min-width":"50"},{default:Object(n["gb"])((function(e){return[Object(n["r"])(L,{type:e.row.id==t.product.id?"success":"default",icon:"el-icon-check",circle:"",onClick:function(t){return g.pickProduct(e.row)}},null,8,["type","onClick"])]})),_:1})]})),_:1},8,["data"]),[[w,t.isLoading]])]),Object(n["n"])("li",b,[Object(n["n"])("ul",h,[Object(n["n"])("li",null,[p,Object(n["n"])("span",null,Object(n["V"])(t.user.name),1)]),Object(n["n"])("li",null,[f,Object(n["n"])("span",null,Object(n["V"])(t.product.name),1)])])]),Object(n["n"])("li",m,[Object(n["hb"])(Object(n["r"])(L,{type:"primary",onClick:g.save,disabled:0==t.user.id||0==t.product.id||t.isLoading},{default:Object(n["gb"])((function(){return[j]})),_:1},8,["onClick","disabled"]),[[w,t.isLoading]])])])}a("7db0"),a("d3b7");var g=a("bc3a"),y=a.n(g),k={name:"UserPurchase",data:function(){return{isLoading:!1,tableData:[],user:{id:0,name:""},product:{id:0,name:""},pickPharmacyId:0,usersList:[],pharmaciesList:[]}},mounted:function(){this.isLoading=!1,this.tableData=[],this.user={id:0,name:""},this.product={id:0,name:""},this.pickPharmacyId=0,this.getPharmacies(),this.getUsers()},watch:{"user.id":{handler:function(t){var e=this.usersList.find((function(e){return e.id==t}));e?this.user.name=e.name:this.user.id=0},deep:!0}},methods:{save:function(){var t=this;if(!this.isLoading){var e={userId:this.user.id,productId:this.product.id};this.isLoading=!0,y.a.post("/api/user/purchase",e).then((function(e){200==e.status?t.$message({message:"完成",type:"success"}):t.$message.error("錯誤")})).catch((function(t){console.log(t),this.$message.error("錯誤")})).finally((function(){t.isLoading=!1}))}},getUsers:function(){var t=this;y.a.post("/api/user/list",{}).then((function(e){t.usersList=e.data.data})).catch((function(t){console.log(t),this.$message.error("錯誤")}))},getPharmacies:function(){var t=this;y.a.post("/api/pharmacy/list",{}).then((function(e){t.pharmaciesList=e.data.data})).catch((function(t){console.log(t),this.$message.error("錯誤")}))},getMasks:function(){var t=this;if(!this.isLoading){this.tableData=[],this.product={id:0,name:""};var e={pharmacyId:this.pickPharmacyId};this.isLoading=!0,y.a.post("/api/pharmacy/list/products",e).then((function(e){t.tableData=e.data.data})).catch((function(t){console.log(t),this.$message.error("錯誤")})).finally((function(){t.isLoading=!1}))}},pickProduct:function(t){this.product.id=t.id,this.product.name=t.name+" ("+t.color+")"}}},v=(a("6987"),a("6b0d")),L=a.n(v);const I=L()(k,[["render",O],["__scopeId","data-v-7d6a69f4"]]);e["default"]=I},"2f66":function(t,e,a){},6987:function(t,e,a){"use strict";a("2f66")},b0c0:function(t,e,a){var n=a("83ab"),c=a("5e77").EXISTS,i=a("9bf2").f,l=Function.prototype,r=l.toString,s=/^\s*function ([^ (]*)/,u="name";n&&!c&&i(l,u,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(t){return""}}})}}]);